'use client'
import Link from 'next/link'
import { useState } from 'react'
import { Tab, Nav } from 'react-bootstrap'
import classnames from 'classnames'
import { ClientRow, ClientCol, GeneralVuln, Upload } from '@/components'
import { vulnerabilityContents } from '@/appConstants'

const renderChildrenItem = (title: string) => {
  switch (title) {
    case 'GENERAL':
      return <GeneralVuln />
    case 'AUTHENTICATION PROVIDER':
      return <></>
    case 'FEATURE FLAGS':
      return <Upload />
    case 'ADVANCED':
      return <></>
    default:
      return <GeneralVuln />
  }
}

export default function Vulnerability() {
  const [selectedTabTitle, setSelectedTabTitle] = useState<string>('GENERAL')

  const handleChangeTab = (tabTitle: string) => {
    setSelectedTabTitle(tabTitle)
  }

  return (
    <ClientRow>
      <Tab.Container defaultActiveKey="Profile">
        <Nav
          variant="tabs"
          className="nav-bordered"
          as="ul"
          activeKey={selectedTabTitle}>
          {vulnerabilityContents.map((tab, index) => {
            return (
              <Nav.Item key={index.toString()} as="li">
                <Nav.Link
                  as={Link}
                  href={''}
                  eventKey={tab.title}
                  onClick={() => handleChangeTab(tab.title)}>
                  <i
                    className={classnames(
                      tab.icon,
                      'd-md-none',
                      'd-block',
                      'me-1'
                    )}></i>
                  <span className="d-none d-md-block">{tab.title}</span>
                </Nav.Link>
              </Nav.Item>
            )
          })}
        </Nav>

        <Tab.Content>
          {vulnerabilityContents.map((tab, index) => {
            return (
              <Tab.Pane eventKey={tab.title} id={tab.id} key={index.toString()}>
                <ClientRow>
                  <ClientCol sm="12">
                    {selectedTabTitle === tab.title &&
                      renderChildrenItem(selectedTabTitle)}
                  </ClientCol>
                </ClientRow>
              </Tab.Pane>
            )
          })}
        </Tab.Content>
      </Tab.Container>
    </ClientRow>
  )
}
